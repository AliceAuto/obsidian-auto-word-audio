# Auto Word Audio

> 🎯 让单词发音自动融入你的 Obsidian 笔记

一个专为英语学习者设计的 Obsidian 插件，自动为单词笔记添加真人发音，支持在线播放和离线缓存。

## ✨ 核心特性

- 🎵 **一键添加发音** - 简单的代码块语法，自动渲染音频播放器
- 📦 **智能音源管理** - 支持在线音频和本地缓存，离线也能学习
- 🔄 **灵活切换音源** - 无需修改笔记，设置中一键切换有道/剑桥等多种音源
- ⚡ **批量处理** - 支持整个文件夹批量添加音频标记
- 🤖 **后台自动同步** - 定时下载音频到本地，构建离线词库
- 🎨 **无缝集成** - 完美兼容 Obsidian 和 Media Extended 插件

## 🎬 快速开始

### 安装插件

1. 下载最新版本
2. 解压到 `.obsidian/plugins/auto-word-audio/`
3. 在设置中启用插件

### 5 秒上手

在你的单词笔记中添加：

````markdown
[[wisdom]] /ˈwɪzdəm/

```word-audio
wisdom
```

[n.] 智慧；名言，格言
````

切换到预览模式，音频播放器自动显示！🎉

## 📖 详细使用

### 命令面板操作

打开命令面板（`Ctrl/Cmd + P`）：

| 命令 | 功能 | 使用场景 |
|------|------|----------|
| 📝 为当前行添加音频标记 | 为光标所在行的单词添加代码块 | 新建单个单词笔记 |
| 📄 为文件所有单词添加音频标记 | 批量为当前文件添加标记 | 整理现有笔记 |
| 🔄 立即同步音频到本地 | 手动触发音频下载 | 准备离线学习 |

### 工作原理

```
你的笔记              插件处理              预览效果
────────            ────────            ────────
```word-audio     →  检查本地缓存      →  🔊 [播放器]
wisdom                ↓
```               获取在线音频
                      ↓
                  后台下载到本地
```

## ⚙️ 配置选项

### 🎯 基本设置
| 设置项 | 说明 | 默认值 |
|--------|------|--------|
| 本地音频目录 | 音频文件保存位置 | `.plugins-data/auto-word-audio` |
| 在线音频模板 | API 地址，`{{word}}` 为占位符 | 有道词典 API |
| 优先使用本地音频 | 本地存在时优先使用 | 关闭 |
| 单词匹配正则 | 识别单词的规则 | `[[word]]` 格式 |
| 批量处理目标文件夹 | 批量操作的目录 | - |

### ⏰ 自动同步设置
| 设置项 | 说明 | 推荐值 |
|--------|------|--------|
| 启用定期同步 | 后台自动下载音频 | 开启 |
| 同步间隔 | 5-180 分钟 | 30 分钟 |
| 每次最大下载数 | 限制单次下载量 | 30 |

## 🎵 音频源推荐

### 有道词典（默认，推荐）
```
https://dict.youdao.com/dictvoice?audio={{word}}&type=2
```
✅ 稳定可靠　✅ 音质优秀　✅ 美音/英音可选

- `type=1` 英音 🇬🇧
- `type=2` 美音 🇺🇸

### 其他音频源
```
# Cambridge Dictionary（剑桥）
https://dictionary.cambridge.org/media/english/uk_pron/{{word}}.mp3

# Collins（柯林斯）
https://www.collinsdictionary.com/sounds/hwd_sounds/{{word}}.mp3
```

💡 **提示**：切换音源只需修改设置，所有笔记自动生效！

## 💼 使用场景

### 📚 场景一：初次整理词库
```bash
1. 执行"为文件所有单词添加音频标记"（批量处理）
2. 执行"立即同步音频到本地"（一次性下载）
3. 开启"优先使用本地音频"（离线可用）
```

### 🎓 场景二：日常学习新词
```bash
1. 启用"定期同步"（30分钟间隔）
2. 新建单词笔记时用"为当前行添加音频标记"
3. 插件自动后台下载音频
```

### ✈️ 场景三：离线复习
```bash
1. 提前同步所有音频到本地
2. 开启"优先使用本地音频"
3. 没有网络也能听发音！
```

### 🔄 场景四：切换音源
```bash
想换成英音？
→ 设置中修改 type=2 为 type=1
→ 所有音频立即切换，无需改笔记
```

## 🔌 插件配合

### 与 Media Extended 联动

安装 [Media Extended](https://github.com/PKM-er/media-extended) 插件后，自动获得：

- ⏩ **快捷键控制** - 空格播放/暂停，← → 快进后退
- 📋 **播放列表** - 连续播放多个单词
- 🎚️ **高级控制** - 调速、循环、AB复读
- 🎬 **更多格式** - 支持视频等媒体类型

完美适配，开箱即用！

## 🎨 设计理念

### 为什么不直接嵌入音频URL？

❌ **传统方式**：
```markdown
<audio src="https://dict.youdao.com/.../wisdom.mp3"></audio>
```
- 笔记中充满长链接，可读性差
- 切换音源需要修改每个笔记
- 无法统一管理本地缓存

✅ **本插件方式**：
```markdown
```word-audio
wisdom
```
```
- 笔记简洁，只保留单词名称
- 插件统一管理所有音源策略
- 一键切换音源，无需改笔记
- 智能本地缓存，离线可用

## 🛠️ 开发

```bash
# 克隆项目
git clone <your-repo-url>
cd auto-word-audio

# 安装依赖
npm install

# 开发模式（热重载）
npm run dev

# 生产构建
npm run build
```

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

### 待开发功能
- [ ] 支持短语和句子的发音
- [ ] 自定义音频播放器样式
- [ ] 音频下载进度显示
- [ ] 音频质量选择（高清/标清）

## 📄 许可证

[MIT License](LICENSE) - 自由使用，保留版权声明即可

## 💬 反馈与支持

- 🐛 发现 Bug？[提交 Issue](../../issues)
- 💡 有新想法？[讨论区见](../../discussions)
- ⭐ 觉得有用？给个 Star 吧！

---

**享受你的 Obsidian 英语学习之旅！** 🚀

